  # Base de datos local (comentada para usar Supabase)
  # db:
  #   image: postgres:15-alpine
  #   restart: unless-stopped
  #   environment:
  #     POSTGRES_USER: ${DB_USERNAME:-postgres}
  #     POSTGRES_PASSWORD: ${DB_PASSWORD:-postgres}
  #     POSTGRES_DB: ${DB_DATABASE:-internetperla}
  #   ports:
  #     - "${DB_PORT:-5434}:5432"
  #   volumes:
  #     - ip_db_data:/var/lib/postgresql/data
  backend:
    build: ./apps/backend
    environment:
      PORT: 3000
      # Configuraci√≥n para Supabase (usar .env.supabase)
      DB_HOST: ${SUPABASE_DB_HOST:-db.your-project.supabase.co}
      DB_PORT: ${SUPABASE_DB_PORT:-5432}
      DB_USERNAME: ${SUPABASE_DB_USERNAME:-postgres}
      DB_PASSWORD: ${SUPABASE_DB_PASSWORD:-your-password}
      DB_DATABASE: ${SUPABASE_DB_NAME:-postgres}
      DB_SSL: ${SUPABASE_DB_SSL:-true}
      DB_SYNC: ${DB_SYNC:-false}
      JWT_SECRET: ${JWT_SECRET:-supersecretjwt}
      JWT_EXPIRES_IN: ${JWT_EXPIRES_IN:-7d}
    # depends_on:
    #   - db  # Comentado porque usamos Supabase
    ports:
      - "3003:3000"
    volumes:
      - uploads:/app/uploads
    env_file:
      - .env.supabase  # Cargar variables de Supabase
  frontend:
    build: ./apps/frontend
    environment:
      VITE_API_URL: http://localhost:3003/api/v1
      VITE_SOCKET_URL: http://localhost:3003
    depends_on:
      - backend
    ports:
      - "3002:5173"
    command: npm run preview
    volumes:
      - ./apps/frontend/src:/app/src
    env_file:
      - .env.supabase  # Cargar variables de Supabase
volumes:
  # ip_db_data:  # Comentado porque usamos Supabase
  uploads:
